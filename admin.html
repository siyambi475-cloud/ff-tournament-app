<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>FF MASTER ADMIN</title>
    <style>
        body { background: #111; color: white; font-family: sans-serif; padding: 20px; }
        .card { background: #222; padding: 20px; border-radius: 10px; margin-bottom: 20px; }
        input, select { width: 100%; padding: 10px; margin: 10px 0; background: #000; color: white; border: 1px solid #444; }
        button { width: 100%; padding: 10px; background: #ff4b2b; border: none; color: white; font-weight: bold; cursor: pointer; }
        .match-item { background: #333; padding: 10px; margin-top: 10px; display: flex; justify-content: space-between; }
    </style>
</head>
<body>
    <div class="card">
        <h3>ADD NEW MATCH</h3>
        <input type="text" id="title" placeholder="Match Title">
        <select id="mode">
            <option value="BR">Battle Royale (BR)</option>
            <option value="CS">Clash Squad (CS)</option>
            <option value="LW">Lone Wolf (LW)</option>
        </select>
        <input type="text" id="map" placeholder="Map Name">
        <input type="number" id="fee" placeholder="Entry Fee">
        <input type="number" id="prize" placeholder="Prize Pool">
        <button onclick="addMatch()">POST TOURNAMENT</button>
    </div>

    <div class="card">
        <h3>MANAGE MATCHES</h3>
        <div id="admin-match-list"></div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, addDoc, onSnapshot, doc, updateDoc, deleteDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = { /* আপনার কনফিগ */ };
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        window.addMatch = async () => {
            const title = document.getElementById('title').value;
            const mode = document.getElementById('mode').value;
            const map = document.getElementById('map').value;
            const fee = document.getElementById('fee').value;
            const prize = document.getElementById('prize').value;
            await addDoc(collection(db, "matches"), { title, mode, map, fee, prize, status: "UPCOMING" });
            alert("Match Added!");
        };

        onSnapshot(collection(db, "matches"), (snap) => {
            const list = document.getElementById('admin-match-list');
            list.innerHTML = "";
            snap.forEach(d => {
                const m = d.data();
                list.innerHTML += `<div class="match-item">
                    <span>${m.title} (${m.status})</span>
                    <div>
                        <button onclick="updateStatus('${d.id}', 'ONGOING')" style="background:orange; width:auto">Live</button>
                        <button onclick="updateStatus('${d.id}', 'RESULT')" style="background:green; width:auto">End</button>
                        <button onclick="deleteMatch('${d.id}')" style="background:red; width:auto">X</button>
                    </div>
                </div>`;
            });
        });

        window.updateStatus = async (id, s) => await updateDoc(doc(db, "matches", id), { status: s });
        window.deleteMatch = async (id) => await deleteDoc(doc(db, "matches", id));
    </script>
</body>
</html>
